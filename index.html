---
layout: default
title: Home
---

{% if page.url == "/" %}

{% assign posts_with_images = site.posts | where_exp: "p","p.image" | sort: "date" | reverse %}
{% assign slider_posts = posts_with_images | slice: 0,6 %}
{% if paginator %}
{% assign all_posts = paginator.posts %}
{% else %}
{% assign all_posts = site.posts | sort: "date" | reverse %}
{% endif %}

<section class="hero-slider">
  <div class="section-title">
    <h2><span>Highlights</span></h2>
  </div>

  <div class="hero-slider__viewport">
    <div class="hero-slider__track">
      {% for post in slider_posts %}
      <article class="hero-slide{% if forloop.first %} is-active{% endif %}">
        <a class="hero-slide__link" href="{{ post.url | relative_url }}">
          <div class="hero-slide__image">
            {% assign loading = "lazy" %}
            {% if forloop.index <= 2 %}
            {% assign loading = "eager" %}
            {% endif %}
            <img
              class="hero-slide__img"
              src="{{ post.image | relative_url }}"
              alt="{{ post.title }}"
              loading="{{ loading }}"
              decoding="async"
              {% if forloop.first %}fetchpriority="high"{% endif %}>
          </div>
          <div class="hero-slide__overlay">
            <p class="hero-slide__meta">{{ post.date | date: "%B %d, %Y" }}</p>
            <h3 class="hero-slide__title">{{ post.title }}</h3>
          </div>
        </a>
      </article>
      {% endfor %}
    </div>

    <button class="hero-slider__control prev" type="button" aria-label="Previous slide">&#10094;</button>
    <button class="hero-slider__control next" type="button" aria-label="Next slide">&#10095;</button>
  </div>
</section>

<style>
.hero-slider { margin: 0 auto 28px; position: relative; max-width: 1024px; }
.hero-slider__viewport { position: relative; overflow: hidden; border-radius: 14px; background: transparent; box-shadow: none; padding: 6px 0; }
.hero-slider__track { display: grid; grid-auto-flow: column; grid-auto-columns: 100%; transition: transform 0.6s ease; background: transparent; column-gap: 12px; align-items: stretch; }
.hero-slide { position: relative; min-height: 340px; }
.hero-slide__link { position: relative; display: block; min-height: inherit; color: inherit; text-decoration: none; border-radius: 12px; overflow: hidden; box-shadow: 0 6px 18px rgba(0,0,0,0.08); }
.hero-slide__image { position: absolute; inset: 0; background-color: #0f172a; }
.hero-slide__img { width: 100%; height: 100%; object-fit: cover; display: block; filter: brightness(0.9); }
.hero-slide__overlay { position: absolute; inset: 0; display: flex; flex-direction: column; justify-content: flex-end; padding: 1.2rem; }
.hero-slide__meta { margin: 0 0 0.25rem; color: #d9e2ec; letter-spacing: 0.04em; font-weight: 600; }
.hero-slide__title { margin: 0; color: #f8fbff; font-size: 1.6rem; line-height: 1.2; }
.hero-slider__control { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(15,23,42,0.7); color: #fff; border: none; width: 42px; height: 42px; border-radius: 50%; cursor: pointer; display: grid; place-items: center; }
.hero-slider__control.prev { left: 10px; }
.hero-slider__control.next { right: 10px; }
.hero-slider__control:hover { background: rgba(15,23,42,0.9); }
@media (max-width: 640px) {
  .hero-slide { min-height: 280px; }
  .hero-slide__title { font-size: 1.3rem; }
  .hero-slide__overlay { padding: 1rem; }
}
@media (min-width: 900px) {
  .hero-slider__track { grid-auto-columns: calc(50% - 6px); column-gap: 12px; background: transparent; }
  .hero-slide__title { font-size: 1.4rem; }
}
</style>

<script>
(function() {
  const track = document.querySelector('.hero-slider__track');
  const slides = Array.from(document.querySelectorAll('.hero-slide'));
  if (!track || slides.length === 0) return;

  const mqWide = window.matchMedia('(min-width: 900px)');
  let slidesPerView = mqWide.matches ? 2 : 1;
  let index = 0;
  let timer = null;
  let touchStartX = null;
  let touchDeltaX = 0;

  const getGap = () => parseFloat(getComputedStyle(track).columnGap || '0') || 0;

  const update = () => {
    const slideWidth = slides[0].getBoundingClientRect().width + getGap();
    track.style.transform = `translateX(-${index * slideWidth}px)`;
    slides.forEach((s, i) => s.classList.toggle('is-active', i === index));
  };

  const next = () => { index = (index + slidesPerView) % slides.length; update(); };
  const prev = () => { index = (index - slidesPerView + slides.length) % slides.length; update(); };

  const start = () => { stop(); timer = setInterval(next, 5000); };
  const stop = () => { if (timer) clearInterval(timer); };

  const handleResize = () => {
    slidesPerView = mqWide.matches ? 2 : 1;
    update();
  };

  document.querySelector('.hero-slider__control.next')?.addEventListener('click', () => { next(); start(); });
  document.querySelector('.hero-slider__control.prev')?.addEventListener('click', () => { prev(); start(); });
  track.addEventListener('mouseenter', stop);
  track.addEventListener('mouseleave', start);
  mqWide.addEventListener('change', handleResize);

  // touch swipe support for mobile
  track.addEventListener('touchstart', (e) => {
    if (!e.touches || !e.touches.length) return;
    touchStartX = e.touches[0].clientX;
    touchDeltaX = 0;
    stop();
  }, { passive: true });

  track.addEventListener('touchmove', (e) => {
    if (touchStartX === null || !e.touches || !e.touches.length) return;
    touchDeltaX = e.touches[0].clientX - touchStartX;
  }, { passive: true });

  track.addEventListener('touchend', () => {
    if (touchStartX === null) return;
    const threshold = 40;
    if (touchDeltaX > threshold) { prev(); }
    else if (touchDeltaX < -threshold) { next(); }
    touchStartX = null;
    touchDeltaX = 0;
    start();
  });

  update();
  start();
})();
</script>

{% endif %}

<!-- Posts Index
================================================== -->
<section class="recent-posts">

    <div class="section-title">

        <h2><span>All Stories</span></h2>

    </div>

    <div class="masonry-grid listrecent">

        {% for post in all_posts %}

        {% include postbox.html %}

        {% endfor %}

    </div>

    {% if paginator %}
    {% include pagination.html %}
    {% endif %}

</section>
